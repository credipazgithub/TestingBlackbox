<form>
    <div class="container-full">
        <h5>Autenticar</h5>
        <p>Permite obtener <b>token_authentication</b> y <b>id_user_active</b>, valores requeridos para cualquier llamada subsecuente a la API.</p>
        <div class="row">
            <div class="col-6 shadow pt-2">
                <table class="table table-borderless">
                    <thead class="thead-light">
                        <tr>
                            <th><b class="p-0 m-0">Endpoint</b></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input class="form-control" id="endpoint" name="endpoint" disabled value="" style="padding:5px !important;" /></td>
                            <td><a href="#" class="btn-copyClip btn btn-sm btn-dark" data-source="endpoint"><span class="material-icons">content_copy</span></a></td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-borderless">
                    <thead class="thead-light">
                        <tr>
                            <th><b class="p-0 m-0">Parámetros</b></th>
                            <th></th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><b>ID aplicación</b></td>
                            <td><input class="form-control" id="id_app" disabled name="id_app" type="number" placeholder="ID aplicación" value="11" /></td>
                            <td><i>integer</i></td>
                            <td><span class="badge badge-danger">requerido</span></td>
                        </tr>
                        <tr>
                            <td><b>Username</b></td>
                            <td><input class="form-control" id="username" name="username" type="text" placeholder="Username" value="" autocomplete="new-password" /></td>
                            <td><i>string</i></td>
                            <td><span class="badge badge-danger">requerido</span></td>
                        </tr>
                        <tr>
                            <td><b>Password</b></td>
                            <td><input class="form-control" id="password" name="password" type="password" placeholder="Password" value="" autocomplete="new-password" /></td>
                            <td><i>string</i></td>
                            <td><span class="badge badge-danger">requerido</span></td>
                        </tr>
                        <tr>
                            <td><b>Versión</b></td>
                            <td><input class="form-control" id="version" name="version" type="text" placeholder="Versión" value="" /></td>
                            <td style="width:25%;"><i>string</i><p style="font-size:0.6rem;">Valor reservador para el implementador donde puede indicar versión de la solución para la llamada o algún otro elemento relevante según su criterio</p></td>
                            <td><span class="badge badge-secondary">opcional</span></td>
                        </tr>
                    </tbody>
                </table>
                <hr />
                <center><a href="#" class="btn btn-raised btn-success btnExec">Ejecutar</a></center>

                <table class="table table-borderless shadow-sm mt-2">
                    <thead class="thead-light">
                        <tr>
                            <th><b class="p-0 m-0">Observaciones</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p>Para integraciones externas se debe utilizar <b>11</b>, como valor de ID application, el cual está fijo en estos ejemplos.</p>
                                <p>Debe enviarse en la llamada de autenticación el username, password y ID application, provistos al integrador.</p>
                                <p>En la estructura de retorno deben considerarse los valores dentro del nodo <b>data</b>, fundamentalmente el <b>token_authentication</b> el cual debe ser enviado, junto al valor <b>data/id</b> en el parámetro requerido <b>id_user_active</b> en llamadas subsecuentes a otros endpoints a integrar.</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-6 p-3 shadow">
                <h5 class="p-0 m-0 titleCall d-none">Llamada Ajax JQuery</h5>
                <div id="request" class="titleCall d-none"></div>
                <h5 class="p-0 m-0 titleCall d-none">Respuesta</h5>
                <div id="response" class="titleCall d-none"></div>
            </div>
        </div>
    </div>
</form>
<script>
    $("body").off("click", ".btnExec").on("click", ".btnExec", function () {
        var _json = {
            "id_app": $("#id_app").val(),
            "username": $("#username").val(),
            "password": $("#password").val(),
            "version": $("#version").val(),
        }
        docUiExecute(_json).then(function (data) {
            $("#response").html("<pre>" + JSON.stringify(data, undefined, 2) + "</pre>");
            $(".titleCall").removeClass("d-none");
        });
    });
</script>
